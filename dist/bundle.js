(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var s={},a=[],r=0;r<t.length;r++){var d=t[r],l=i.base?d[0]+i.base:d[0],c=s[l]||0,h="".concat(l," ").concat(c);s[l]=c+1;var p=n(h),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var g=o(u,i);i.byIndex=r,e.splice(r,0,{identifier:h,updater:g,references:1})}a.push(h)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var s=i(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var r=n(s[a]);e[r].references--}for(var d=i(t,o),l=0;l<s.length;l++){var c=n(s[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}s=d}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var r=0;r<this.length;r++){var d=this[r][0];null!=d&&(a[d]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);i&&a[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},365:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(601),o=n.n(i),s=n(314),a=n.n(s)()(o());a.push([t.id,"body {\n    font-family: Arial, sans-serif;\n    background: #333;\n    color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    margin: 0;\n}\n\n.container {\n    display: flex;\n    align-items: flex-start;\n}\n\ncanvas {\n    border: 2px solid black;\n    background: #777;\n}\n\ncontrols {\n    background: #444;\n    padding: 15px;\n    border-radius: 10px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 10px;\n    width: 220px;\n    text-align: center;\n    margin-left: 20px;\n}\n\n.status {\n    font-weight: bold;\n    text-align: center;\n}\n\nbutton {\n    background: #666;\n    color: white;\n    border: none;\n    padding: 10px;\n    cursor: pointer;\n    border-radius: 5px;\n    width: 100%;\n}\n\n    button:disabled {\n        background: #444;\n        cursor: not-allowed;\n    }\n",""]);const r=a},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var i=n(72),o=n.n(i),s=n(825),a=n.n(s),r=n(659),d=n.n(r),l=n(56),c=n.n(l),h=n(540),p=n.n(h),u=n(113),g=n.n(u),f=n(365),b={};b.styleTagTransform=g(),b.setAttributes=c(),b.insert=d().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=p(),o()(f.A,b),f.A&&f.A.locals&&f.A.locals;class y extends HTMLElement{constructor(){super(),this.savedPoints=null,this.points=[],this.addingPoints=!1,this.selectingFirst=!1,this.selectingSecond=!1,this.firstPoint=null,this.secondPoint=null,this.clockwise=!0}connectedCallback(){const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent="\n        body {\n            font-family: Arial, sans-serif;\n            background: #333;\n            color: white;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n        }\n\n        .container {\n            display: flex;\n            align-items: flex-start;\n        }\n\n        canvas {\n            border: 2px solid black;\n            background: #777;\n        }\n\n        controls {\n            background: #444;\n            padding: 15px;\n            border-radius: 10px;\n            flex-direction: column;\n            align-items: center;\n            gap: 10px;\n            width: 320px;\n            text-align: center;\n            margin-left: 30px;\n        }\n\n        p, h3 {\n            font-weight: bold;\n            text-align: center;\n            white-space: normal;\n            max-width: 200px;\n        }\n\n        .controls button {\n            margin-bottom: 10px;\n            width: 200px;\n            max-width: 200px;\n            height: 50px;\n            text-align: center;\n            padding: 10px;\n            border-radius: 5px;\n            background: #666;\n            color: white;\n            border: none;\n            cursor: pointer;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n            .controls button:disabled {\n                background: #444;\n                cursor: not-allowed;\n            }\n\n            ",t.innerHTML='\n            <div class="controls" >\n                <h3>Create Polygon</h3>\n                <button id="createPoints">Create Points</button>\n                <p id="pointsStatus" class="status">No points created</p>\n                <button id="drawPolygon" disabled>Draw Polygon</button>\n                <h3>Create Path</h3>\n                <button id="firstPoint" disabled>First Point</button>\n                <p id="firstPointLabel">None</p>\n                <button id="secondPoint" disabled>Second Point</button>\n                <p id="secondPointLabel">None</p>\n                <button id="toggleDirection" disabled>Clockwise</button>\n                <button id="clear" disabled>Clear</button>\n                <button id="clearStorage">Clear Storage</button>\n                <p id="pathOutput">Path: None</p>\n            </div >',t.prepend(e),this.setupCanvas()}setupCanvas(){const t=document.getElementById("polygonCanvas"),e=t.getContext("2d"),n=this.shadowRoot.getElementById("createPoints"),i=this.shadowRoot.getElementById("drawPolygon"),o=this.shadowRoot.getElementById("firstPoint"),s=this.shadowRoot.getElementById("secondPoint"),a=this.shadowRoot.getElementById("toggleDirection"),r=this.shadowRoot.getElementById("clear"),d=this.shadowRoot.getElementById("clearStorage"),l=this.shadowRoot.getElementById("pointsStatus"),c=this.shadowRoot.getElementById("firstPointLabel"),h=this.shadowRoot.getElementById("secondPointLabel"),p=this.shadowRoot.getElementById("pathOutput");document.addEventListener("DOMContentLoaded",(()=>{this.loadPolygonFromLocalStorage(e)})),t.addEventListener("click",(n=>{const i=t.getBoundingClientRect(),o=n.clientX-i.left,s=n.clientY-i.top;if(this.addingPoints)this.points.push({x:o,y:s}),this.drawPoint(o,s,`p${this.points.length}`,e),this.updateStatus();else if(this.selectingFirst||this.selectingSecond){let n=this.findClosestPoint(o,s);n&&(this.selectingFirst?(this.firstPoint=n,c.textContent=`p${this.points.indexOf(n)+1}`):this.selectingSecond&&(this.secondPoint=n,h.textContent=`p${this.points.indexOf(n)+1}`),this.selectingFirst=!1,this.selectingSecond=!1,this.firstPoint&&this.secondPoint&&(e.clearRect(0,0,t.width,t.height),this.highlightPath(e)))}})),n.addEventListener("click",(()=>{this.addingPoints=!0,this.points=[],e.clearRect(0,0,t.width,t.height),l.style.color="white",l.textContent="Click to add points",r.disabled=!1,n.disabled=!0})),i.addEventListener("click",(()=>{this.drawGraph(e),o.disabled=!1,s.disabled=!1,a.disabled=!1,i.disabled=!0})),o.addEventListener("click",(()=>{this.selectingFirst=!0})),s.addEventListener("click",(()=>{this.selectingSecond=!0})),r.addEventListener("click",(()=>{this.points=[],this.addingPoints=!1,this.selectingFirst=!1,this.selectingSecond=!1,this.firstPoint=null,this.secondPoint=null,this.clockwise=!0,n.disabled=!1,i.disabled=!0,o.disabled=!0,s.disabled=!0,r.disabled=!0,a.disabled=!0,c.textContent="None",h.textContent="None",a.textContent="Clockwise",p.textContent="Path: None",null==this.savedPoints&&(d.disabled=!0),l.textContent="No points created",l.style.color="white",e.clearRect(0,0,t.width,t.height)})),a.addEventListener("click",(()=>{this.clockwise=!this.clockwise,a.textContent=this.clockwise?"Clockwise":"Counterclockwise",this.firstPoint&&this.secondPoint&&(e.clearRect(0,0,t.width,t.height),this.highlightPath(e))})),d.addEventListener("click",(()=>{this.savedPoints=null,localStorage.removeItem("polygonPoints"),p.textContent="Storage cleared!",d.disabled=!0}))}loadPolygonFromLocalStorage(t){if(this.savedPoints=localStorage.getItem("polygonPoints"),this.savedPoints){this.points=JSON.parse(this.savedPoints);for(let e=0;e<this.points.length;e++)this.drawPoint(this.points[e].x,this.points[e].y,`p${e+1}`,t);this.drawGraph(t),this.updateStatus(),this.shadowRoot.getElementById("firstPoint").disabled=!1,this.shadowRoot.getElementById("secondPoint").disabled=!1,this.shadowRoot.getElementById("toggleDirection").disabled=!1,this.shadowRoot.getElementById("clear").disabled=!1,this.shadowRoot.getElementById("createPoints").disabled=!0,this.shadowRoot.getElementById("drawPolygon").disabled=!0,this.shadowRoot.getElementById("clearStorage").disabled=!1}else this.shadowRoot.getElementById("clearStorage").disabled=!0}savePolygonToLocalStorage(){localStorage.setItem("polygonPoints",JSON.stringify(this.points)),this.shadowRoot.getElementById("clearStorage").disabled=!1}drawPoint(t,e,n,i){i.fillStyle="yellow",i.beginPath(),i.arc(t,e,5,0,2*Math.PI),i.fill(),i.fillStyle="white",i.fillText(n,t+5,e-5)}updateStatus(){const t=this.shadowRoot.getElementById("pointsStatus");t.textContent=`Created ${this.points.length} points`,t.style.color=this.points.length>=3&&this.points.length<=15?"green":"red",this.shadowRoot.getElementById("drawPolygon").disabled=this.points.length<3||this.points.length>15}drawGraph(t){if(!(this.points.length<3)){this.addingPoints=!1,t.strokeStyle="white",t.lineWidth=2,t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(let e=1;e<this.points.length;e++)t.lineTo(this.points[e].x,this.points[e].y);t.closePath(),t.stroke(),this.savePolygonToLocalStorage()}}findClosestPoint(t,e){return this.points.find((n=>Math.hypot(n.x-t,n.y-e)<10))}highlightPath(t){if(!this.firstPoint||!this.secondPoint)return;this.clearPath(t),t.strokeStyle="blue",t.lineWidth=3,t.beginPath(),t.moveTo(this.firstPoint.x,this.firstPoint.y);let e=[],n=this.points.indexOf(this.firstPoint),i=this.points.indexOf(this.secondPoint),o=n;for(;e.push(`p${o+1}`),t.lineTo(this.points[o].x,this.points[o].y),o!==i;)o=this.clockwise?(o+1)%this.points.length:(o-1+this.points.length)%this.points.length;t.stroke(),this.shadowRoot.getElementById("pathOutput").textContent=`Path: ${e.join(" - ")}`}clearPath(t){for(let e=0;e<this.points.length;e++)this.drawPoint(this.points[e].x,this.points[e].y,`p${e+1}`,t);this.drawGraph(t)}}customElements.get("polygon-app")||customElements.define("polygon-app",y)})();